local tb = require"global.global"
Button = {}
DropDown = {}

Button.StartButtonCallback = function()
    --点击开始游戏按钮之后跳转到游戏的第一个场景中
    --@RefType [luaIde#CS.UnityEngine.GameObject]
    local go = CS.UnityEngine.Resources.Load("Prefab/LoginDialog", typeof(CS.UnityEngine.GameObject))
    --@RefType [luaIde#CS.UnityEngine.GameObject]
    local obj = CS.UnityEngine.GameObject.Instantiate(go)
    CS.Global.Translator.Translate(obj:GetComponent("Canvas"))
    CS.UnityEngine.SceneManagement.SceneManager.MoveGameObjectToScene(obj, CS.UnityEngine.SceneManagement.SceneManager.GetActiveScene())
    -- CS.UnityEngine.GameObject.Destroy(obj)
    -- 创建一个
    tb.closeDialogThread = coroutine.create(function()
        CS.UnityEngine.GameObject.Destroy(obj)
        --@RefType [luaIde#CS.UnityEngine.GameObject]
        local txt = CS.UnityEngine.GameObject("continue")
        -- print(txt.name)
        local text = txt:AddComponent(typeof(CS.UnityEngine.UI.Text))
        text.text = "按任意键开始游戏"
        text.font = CS.UnityEngine.Font.CreateDynamicFontFromOSFont("Arial", 45)
        text.fontSize = 45
        txt:GetComponent(typeof(CS.UnityEngine.RectTransform)).sizeDelta = CS.UnityEngine.Vector2(700, 100)
        --@RefType [CS.UnityEngine.Transform]
        text.alignment = CS.UnityEngine.TextAnchor.MiddleCenter
        text.color = CS.UnityEngine.Color.yellow
        text:DOFade(0.7, 1.5)
        text.transform:DOScale(1.5, 2)
        text:DOPlay()
        text:DOPlayForward()
        --@RefType [luaIde#CS.UnityEngine.GameObject]
        local back = CS.Global.GetRootObject("BackCanvas")
        txt.transform:SetParent(back.transform)
        txt.transform.localPosition = CS.UnityEngine.Vector3(0, -150, 0)
    end)

    tb.closeDialogThread2 = coroutine.create(function()
        CS.UnityEngine.GameObject.Destroy(obj)
    end)
end

Button.SettingButtonCallback = function()
    -- 点击设置按钮之后跳转到设置场景
    CS.Global.NavigateTo("SettingScene", false)
end

Button.ExitButtonCallback = function()
    --点击退出游戏按钮，先弹出对话框，如果用户选择是，则退出游戏
    --@RefType [luaIde#CS.Util.ModelDialog]
    local dialog = CS.Util.ModelDialog("是否要退出游戏？", "是", "否", function()
        -- CS.Global.Log("你点击了是")
        CS.UnityEngine.Application.Quit(0)
        CS.Global.Log("退出游戏")
    end, function()
        -- CS.UnityEngine.SceneManagement.SceneManager.LoadScene(2)
        CS.Global.Log("你点击了否")
    end)
    dialog:ShowDialog()
end

Button.LoginButtonCallback = function()
    CS.Global.Log("你点击了登入按钮")
end