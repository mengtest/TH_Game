local yuki_init_list = require"message.yuki.init"

package.cpath = package.cpath .. ';C:/Users/yuki/.Rider2019.3/config/plugins/intellij-emmylua/classes/debugger/emmy/windows/x64/?.dll'
local dbg = require('emmy_core')
dbg.tcpListen('localhost', 9966)

---加载全局lua的模块
local function luaInit()
    yuki_init_list.init()
    local app = util.readCfgFile(CS.Util.Loader.Read("LuaScript/config/app"))
    cards = json.decode(CS.Util.Loader.Read("Extend/Cards"))
    if app and app.host and app.port then
        CS.Net.NetHelper.GetInstance():Connect(app.host, app.port)
    else
        CS.Global.Alert("无效的配置文件，请尝试重新下载游戏")
        CS.UnityEngine.Application.Quit(0)
        return
    end
    
    --local function asd(a, b, c) 
    --    log(a)
    --    log(b)
    --    log(c)
    --end
    --CS.Global.Test(asd)
    --CS.Global.Test(asd)
end

log("开始加载lua模块")
luaInit()
log("lua模块加载完成")